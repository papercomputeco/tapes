<!doctype html>
<html class="dark" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>tapes deck</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/deck.css" />
  </head>
  <body>
    <div class="app">
      <main id="overview-view">
        <header class="header">
          <div class="header__left">
            <div class="header__title-row">
              <h1 class="header__title">tapes<span class="header__separator"> / </span>deck</h1>
              <span class="header__status" id="online-status">
                <span class="header__status-dot"></span>
                online
              </span>
              <span class="header__version" id="version-label"></span>
            </div>
            <p class="header__subtitle" id="session-count">loading sessions...</p>
          </div>
          <div class="header__right">
            <span class="header__badge">local only</span>
            <span class="header__settings" id="settings-button">&#9881;</span>
          </div>
        </header>

        <div class="header__toolbar">
          <div class="header__title-label">Analytics Dashboard</div>
          <section class="period" id="period"></section>
        </div>

        <section class="metrics" id="metrics"></section>

        <section class="charts">
          <div class="chart-panel chart-panel--models">
            <div class="section-header">
              <span class="section-header__label">cost by model</span>
              <div class="section-header__line"></div>
            </div>
            <div id="models"></div>
          </div>
          <div class="chart-panel chart-panel--status">
            <div class="section-header">
              <span class="section-header__label">session status</span>
              <div class="section-header__line"></div>
            </div>
            <div id="status"></div>
          </div>
        </section>

        <section class="sessions-section" id="sessions-panel">
          <div class="section-header">
            <span class="section-header__label">recent sessions</span>
            <div class="section-header__line"></div>
            <div class="sessions-controls">
              <span class="sessions-control">[<span class="sessions-control__key">S</span>] sort</span>
              <span class="sessions-control">[<span class="sessions-control__key">F</span>] filter</span>
              <span class="sessions-control">status: <span class="sessions-control__value" id="status-label">all</span></span>
            </div>
          </div>
          <div class="sessions-filters" id="sessions-filters" hidden>
            <label class="filter-control">
              <span>sort</span>
              <select id="sort-select">
                <option value="cost">cost</option>
                <option value="time">time</option>
                <option value="tokens">tokens</option>
                <option value="duration">duration</option>
              </select>
            </label>
            <label class="filter-control">
              <span>dir</span>
              <select id="sort-dir-select">
                <option value="desc">desc</option>
                <option value="asc">asc</option>
              </select>
            </label>
            <label class="filter-control">
              <span>status</span>
              <select id="status-select">
                <option value="">all</option>
                <option value="completed">completed</option>
                <option value="failed">failed</option>
                <option value="abandoned">abandoned</option>
              </select>
            </label>
          </div>
          <div class="sessions-table" id="sessions"></div>
          <div class="sessions-more" id="sessions-more" hidden>
            <button class="sessions-more__button" id="show-more-button">show more</button>
          </div>
        </section>
      </main>

      <main id="analytics-view" hidden>
        <header class="header">
          <div class="header__left">
            <div class="header__title-row">
              <h1 class="header__title">tapes<span class="header__separator"> / </span>deck</h1>
              <span class="header__status" id="analytics-online-status">
                <span class="header__status-dot"></span>
                online
              </span>
            </div>
            <p class="header__subtitle" id="analytics-subtitle">loading analytics...</p>
          </div>
          <div class="header__right">
            <button class="back-button" id="analytics-back-button" type="button">&#8592; overview</button>
          </div>
        </header>

        <div class="header__toolbar">
          <div class="header__title-label">Session Analytics</div>
          <section class="period" id="analytics-period"></section>
        </div>

        <div class="analytics-loading" id="analytics-loading">
          <div class="analytics-loading__spinner"></div>
          <span class="analytics-loading__text">analyzing sessions...</span>
        </div>

        <div id="analytics-content">
        <section class="analytics-summary" id="analytics-summary"></section>

        <section class="analytics-panels">
          <div class="analytics-panel">
            <div class="section-header">
              <span class="section-header__label">activity heatmap</span>
              <div class="section-header__line"></div>
            </div>
            <div class="heatmap-grid" id="analytics-heatmap"></div>
            <div class="heatmap-hint" id="heatmap-hint"></div>
          </div>
          <div class="analytics-panel">
            <div class="section-header">
              <span class="section-header__label">top tools</span>
              <div class="section-header__line"></div>
            </div>
            <div id="analytics-tools"></div>
          </div>
          <div class="day-detail-section" id="day-detail" hidden>
            <div class="day-detail__header">
              <button class="day-detail__nav" id="day-prev" type="button">&#8592;</button>
              <span class="day-detail__date" id="day-detail-date"></span>
              <button class="day-detail__nav" id="day-next" type="button">&#8594;</button>
              <button class="day-detail__close" id="day-detail-close" type="button">&#10005;</button>
            </div>
            <div class="day-detail__metrics" id="day-detail-metrics"></div>
            <div class="day-detail__sessions" id="day-detail-sessions"></div>
          </div>
        </section>

        <section class="analytics-panels">
          <div class="analytics-panel">
            <div class="section-header">
              <span class="section-header__label">duration distribution</span>
              <div class="section-header__line"></div>
            </div>
            <div class="histogram" id="analytics-duration"></div>
          </div>
          <div class="analytics-panel">
            <div class="section-header">
              <span class="section-header__label">cost distribution</span>
              <div class="section-header__line"></div>
            </div>
            <div class="histogram" id="analytics-cost"></div>
          </div>
        </section>

        <section class="analytics-panels">
          <div class="analytics-panel analytics-panel--wide">
            <div class="section-header">
              <span class="section-header__label">model comparison</span>
              <div class="section-header__line"></div>
            </div>
            <div id="analytics-models"></div>
          </div>
          <div class="analytics-panel">
            <div class="section-header">
              <span class="section-header__label">provider split</span>
              <div class="section-header__line"></div>
            </div>
            <div id="analytics-providers"></div>
          </div>
        </section>

        <section class="analytics-insights" id="analytics-insights" hidden>
          <div class="section-header">
            <span class="section-header__label">ai insights</span>
            <div class="section-header__line"></div>
          </div>
          <div class="analytics-panels">
            <div class="analytics-panel">
              <div class="section-header">
                <span class="section-header__label">goal categories</span>
                <div class="section-header__line"></div>
              </div>
              <div id="insights-goals"></div>
            </div>
            <div class="analytics-panel">
              <div class="section-header">
                <span class="section-header__label">outcomes</span>
                <div class="section-header__line"></div>
              </div>
              <div id="insights-outcomes"></div>
            </div>
          </div>
          <div class="analytics-panels">
            <div class="analytics-panel">
              <div class="section-header">
                <span class="section-header__label">friction points</span>
                <div class="section-header__line"></div>
              </div>
              <div id="insights-friction"></div>
            </div>
            <div class="analytics-panel">
              <div class="section-header">
                <span class="section-header__label">session types</span>
                <div class="section-header__line"></div>
              </div>
              <div id="insights-types"></div>
            </div>
          </div>
          <div class="analytics-panel analytics-panel--full">
            <div class="section-header">
              <span class="section-header__label">recent summaries</span>
              <div class="section-header__line"></div>
            </div>
            <div id="insights-summaries"></div>
          </div>
        </section>
        </div><!-- analytics-content -->
      </main>

      <main id="session-view" hidden>
        <header class="header">
          <div class="header__left">
            <div class="header__breadcrumb">
              <span class="header__breadcrumb-root">Tapes</span>
              <span class="header__breadcrumb-sep">&gt;</span>
              <span id="session-breadcrumb">session</span>
            </div>
          </div>
          <div class="header__right">
            <button class="back-button" id="back-button" type="button">&#8592; back</button>
          </div>
        </header>
        <section class="session-detail" id="detail"></section>
      </main>
    </div>

    <footer class="footer" id="footer">
      <div class="footer__keys">
        <div class="footer__key"><span class="footer__key-label">J/K</span> move</div>
        <div class="footer__key"><span class="footer__key-label">Enter</span> drill</div>
        <div class="footer__key"><span class="footer__key-label">H</span> back</div>
        <div class="footer__key"><span class="footer__key-label">S</span> sort</div>
        <div class="footer__key"><span class="footer__key-label">F</span> filter</div>
        <div class="footer__key"><span class="footer__key-label">P</span> period</div>
        <div class="footer__key"><span class="footer__key-label">A</span> analytics</div>
        <div class="footer__key"><span class="footer__key-label">R</span> replay</div>
        <div class="footer__key"><span class="footer__key-label">Q</span> quit</div>
      </div>
    </footer>

    <script src="/deck.js"></script>
  </body>
</html>
